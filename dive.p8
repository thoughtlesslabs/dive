pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
-- deep sea diver
-- a thoughtless labs experiment

function _init()
	make_player()
	make_hose()
	gravity = 0.01
	friction = 1.01
	cooldown = 10
	debug = ""
end

function _update60()
	move_player()
	adjust_hose()

end

function _draw()
	cls()
	spr(1,p.x,p.y)
	line(hose.x,hose.y,hose.x2,hose.y2,7)
	print(debug)
end

function make_player()
	p = {}
	p.x = 10
	p.y = 20
	p.dx = 0
	p.dy = 0
end

function make_hose()
	hose = {}
	hose.x = 0
	hose.y = 0
	hose.x2 = 0
	hose.y2 = 0
end
-->8
-- updatefunctions

function move_player()
	if cooldown <= 0 then
	if btn(0) then	p.dx = -0.5 end
	if btn(1) then	p.dx = 0.5 end
	if btn(2) then	p.dy = -0.5 end
	if btn(3) then	p.dy = 0.5	end
	cooldown = 10
	end
	
	cooldown -= 1
	
	
	p.dy = p.dy+gravity
	p.dx = p.dx/friction

	p.x += p.dx
	p.y += p.dy
	
	if p.y > 95 then
		p.dx = 0
	end
	
	p.x = mid(5,p.x,100)
	p.y = mid(5,p.y,100)
	debug = p.dx
end


function adjust_hose()
	hose.x = p.x
	hose.y = p.y
end
__gfx__
00000000200660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000209696000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700229696000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000022660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700009499400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
